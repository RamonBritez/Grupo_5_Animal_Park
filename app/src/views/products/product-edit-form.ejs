<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head') %>
<body>
	
	<%- include('../partials/header') %>


	<main class="form-create">

		<div class="login__menu">
			<div class="row">
				<div class="col-12">
					<h2 class="products-title">Formulario de edicion de productos</h2>
				</div>
			</div>
			
			<div class="login__menu-form">
				<form id="form" method="post" action="/admin/productUpdate/<%= product.id %>?_method=put" enctype="multipart/form-data">
					<div class="form-container">
						
						
						<div class="input">
							<label for="name" class="form-label">Nombre del producto:</label>
							<input type="text" id="name" name="name" value="<%= locals.old && old.name ? old.name : product.name %>" class="form-input">
							<small id="nameError" class="text-error"><%= locals.errors && errors.name ? errors.name.msg : null%></small>
						</div>
						
						<div class="selectores">
							<label for="brand" class="form-label">Animal:</label>
							<select name="brand" id="brand" class="form-input">
								<option selected hidden>Elegí</option>
								<% brands.forEach(brand => { %>
									<option 
									value="<%- brand.id %>" 
									<%- locals.old && old.brand == brand.id ?
									 "selected" : brand.id == product.brand_id ?
									  `selected` : ""  %>>
									<%- brand.brand %>
								</option>
								<% }) %>
							</select>
							<small class="text-error"><%= locals.errors && errors.brand ? errors.brand.msg : null%></small>
						</div>
						
						<div class="input">
							<label for="price" class="form-label">Precio del producto:</label>
							<input type="number" id="price" name="price" value="<%= product.price %>" class="form-input">
							<small id="priceError" class="text-error"><%= locals.errors && errors.price ? errors.price.msg : null%></small>
						</div>
						
						<div class="input">
							<label for="discount" class="form-label">Descuento:</label>
							<input type="text" id="discount" name="discount" value="<%= product.discount %>" class="form-input">
							<small id="discountError" class="text-error"><%= locals.errors && errors.discount ? errors.discount.msg : null%></small>
						</div>
						
						<div class="input">
							<label for="weight" class="form-label">Peso:</label>
							<input type="text" id="weight" name="weight" value="<%= product.weight %>" class="form-input">
							<small id="weightError" class="text-error"><%= locals.errors && errors.weight ? errors.weight.msg : null%></small>
						</div>
						
						<div class="selectores">
							<label for="pet" class="form-label">Animal:</label>
							<select name="pet" id="pet" class="form-input">
								<option selected hidden>Elegí</option>
								<% pets.forEach(pet => { %>
									<option 
									value="<%- pet.id %>" 
									<%- locals.old && old.pet == pet.id ?
									 "selected" : pet.id == product.pet_id ?
									  `selected` : ""  %>>
									<%- pet.pet %>
								</option>
								<% }) %>
							</select>
							<small class="text-error"><%= locals.errors && errors.pet ? errors.pet.msg : null%></small>
						</div>
							
						<div class="selectores">
								<label for="category" class="form-label">Categoria:</label>
								<select name="category" id="category" class="form-input">
									<option selected hidden>Elegí</option>
									<% categories.forEach(category => { %>
									    <option 
                            			value="<%- category.id %>" 
                            			<%- locals.old && old.category == category.id ?
                             			"selected" : category.id == product.category_id ?
                              			`selected` : ""  %>>
                            			<%- category.name %>
                        			</option>
									<% }) %>
							</select>
							<small class="text-error"><%= locals.errors && errors.category ? errors.category.msg : null%></small>
						</div>
						
						<div class="input-file">
							<label for="image">Agregar imagen del producto</label>
							<input type="file" id="image" name="image" multiple accept="image/*">
						</div>
						<small  id="fileError" class="text-error"><%= locals.errors && errors.image? errors.image.msg : null%></small>
						
						<div class="description">
							<label for="description" class="form-label">Descripción:</label>
							<textarea name="description" id="description" class="form-input"><%= product.description %></textarea>
							<small id="descriptionError" class="text-error"><%= locals.errors && errors.description? errors.description.msg : null%></small>
						</div>
						
						<div class="save-product">
							<span id="submitError" class="text-error"></span>
							<button type="submit" class="btn">Guardar producto</button>
						</div>
					</div>
				</form>
			</div>
	
		</div>
	
	</main>


	<%- include('../partials/footer') %>
	<script src="/js/validacionEdit.js"></script>
</body>	
</html>